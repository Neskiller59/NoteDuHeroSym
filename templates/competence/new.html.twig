{% extends 'base.html.twig' %}

{% block title %}{{ competence is defined ? 'Modifier comp√©tence' : 'Nouvelle comp√©tence' }}{% endblock %}

{% block body %}
<div class="container mt-5" style="max-width:700px;">
    <h1 class="h2 mb-4">
        {{ competence is defined ? 'Modifier comp√©tence pour ' ~ hero.name : 'Cr√©er une nouvelle comp√©tence pour ' ~ hero.name }}
    </h1>

    <form method="post">
        <div class="mb-3">
            <label class="form-label">Nom</label>
            <input type="text" name="name" class="form-control" value="{{ competence.name ?? '' }}" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Description</label>
            <textarea name="description" class="form-control" rows="4">{{ competence.description ?? '' }}</textarea>
        </div>

        <div class="mb-3">
            <label class="form-label">Effet</label>
            <input type="text" name="effet" class="form-control" value="{{ competence.effet ?? '' }}">
        </div>

        <div class="mb-3">
            <label class="form-label">Origine</label>
            <input type="text" name="origine" class="form-control" value="{{ competence.origine ?? '' }}">
        </div>

        <button type="submit" class="btn btn-success">
            {{ competence is defined ? 'üíæ Enregistrer les modifications' : 'üíæ Cr√©er la comp√©tence' }}
        </button>

        {# ‚úÖ Bouton Annuler avec heroId #}
        <a href="{{ path('competence_list', {'heroId': hero.id}) }}" class="btn btn-secondary ms-2">‚Üê Annuler</a>
    </form>

    {# --- Messages flash --- #}
    {% for label, messages in app.flashes %}
        {% for message in messages %}
            <div class="alert alert-{{ label }} alert-dismissible fade show mt-3" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endfor %}
    {% endfor %}
</div>
{% endblock %}
